<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Pattern (yuujinchou.Yuujinchou.Pattern)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">yuujinchou</a> &#x00BB; <a href="../index.html">Yuujinchou</a> &#x00BB; Pattern</nav><h1>Module <code>Yuujinchou.Pattern</code></h1><p>The <a href="index.html"><code>Pattern</code></a> module defines the patterns.</p><nav class="toc"><ul><li><a href="#pattern-type">Pattern Type</a><ul><li><a href="#hierarchical-names">Hierarchical Names</a></li></ul></li><li><a href="#pattern-builders">Pattern Builders</a><ul><li><a href="#basics">Basics</a></li><li><a href="#negation">Negation</a></li><li><a href="#renaming">Renaming</a></li><li><a href="#associated-data">Associated Data</a></li><li><a href="#sequencing">Sequencing</a></li><li><a href="#union">Union</a></li></ul></li><li><a href="#pretty-printers">Pretty Printers</a></li></ul></nav></header><section><header><h2 id="pattern-type"><a href="#pattern-type" class="anchor"></a>Pattern Type</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt><dd><p>The type of patterns, parametrized by the type of associated data.</p></dd></dl><aside><p>The pattern type is abstract---you should build a pattern using the following builders and execute it by <a href="../Action/index.html#val-run"><code>Action.run</code></a>.</p></aside><dl><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> bool</code></dt><dd><p>Checking equality. Note that patterns created by <a href="index.html#val-filter_map"><code>filter_map</code></a> are not comparable to each other because they take a function.</p></dd></dl><section><header><h3 id="hierarchical-names"><a href="#hierarchical-names" class="anchor"></a>Hierarchical Names</h3></header><dl><dt class="spec type" id="type-path"><a href="#type-path" class="anchor"></a><code><span class="keyword">type</span> path</code><code> = <span>string list</span></code></dt><dd><p>The type of names.</p></dd></dl><aside><p>We assume names are hierarchical and can be encoded as lists of strings. For example, the name <code>x.y.z</code> is represented as the following OCaml list:</p><pre><code class="ml">[&quot;x&quot;; &quot;y&quot;; &quot;z&quot;]</code></pre></aside></section></section><section><header><h2 id="pattern-builders"><a href="#pattern-builders" class="anchor"></a>Pattern Builders</h2></header><section><header><h3 id="basics"><a href="#basics" class="anchor"></a>Basics</h3></header><dl><dt class="spec value" id="val-any"><a href="#val-any" class="anchor"></a><code><span class="keyword">val</span> any : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>any</code> keeps the content of the current tree. It is an error if the tree is empty (no name to match).</p></dd></dl><dl><dt class="spec value" id="val-root"><a href="#val-root" class="anchor"></a><code><span class="keyword">val</span> root : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>root</code> keeps only the empty name (the empty list <code>[]</code>). It is equivalent to <code>only []</code>.</p></dd></dl><dl><dt class="spec value" id="val-wildcard"><a href="#val-wildcard" class="anchor"></a><code><span class="keyword">val</span> wildcard : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>wildcard</code> keeps everything <em>except</em> the empty name (the empty list <code>[]</code>). It is an error if there was no name is matched.</p></dd></dl><dl><dt class="spec value" id="val-only"><a href="#val-only" class="anchor"></a><code><span class="keyword">val</span> only : <a href="index.html#type-path">path</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>only x</code> keeps the name <code>x</code> and drops everything else. It is an error if there was no binding named <code>x</code> in the tree.</p></dd></dl><dl><dt class="spec value" id="val-only_subtree"><a href="#val-only_subtree" class="anchor"></a><code><span class="keyword">val</span> only_subtree : <a href="index.html#type-path">path</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>only_subtree path</code> keeps the subtree rooted at <code>path</code>. It is an error if the subtree was empty.</p></dd></dl><dl><dt class="spec value" id="val-in_subtree"><a href="#val-in_subtree" class="anchor"></a><code><span class="keyword">val</span> in_subtree : <a href="index.html#type-path">path</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>in_subtree path pattern</code> runs the pattern <code>pat</code> on the subtree rooted at <code>path</code>. Bindings outside the subtree are kept intact.</p></dd></dl></section><section><header><h3 id="negation"><a href="#negation" class="anchor"></a>Negation</h3></header><dl><dt class="spec value" id="val-none"><a href="#val-none" class="anchor"></a><code><span class="keyword">val</span> none : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>none</code> drops everything. It is an error if the tree was already empty (nothing to drop).</p></dd></dl><dl><dt class="spec value" id="val-except"><a href="#val-except" class="anchor"></a><code><span class="keyword">val</span> except : <a href="index.html#type-path">path</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>except x</code> drops the binding at <code>x</code>. It is an error if there was no <code>x</code> from the beginning.</p></dd></dl><dl><dt class="spec value" id="val-except_subtree"><a href="#val-except_subtree" class="anchor"></a><code><span class="keyword">val</span> except_subtree : <a href="index.html#type-path">path</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>except_subtree p</code> drops the subtree rooted at <code>p</code>. It is an error if there was nothing in the subtree. This is equivalent to <code>in_subtree p none</code>.</p></dd></dl></section><section><header><h3 id="renaming"><a href="#renaming" class="anchor"></a>Renaming</h3></header><dl><dt class="spec value" id="val-renaming"><a href="#val-renaming" class="anchor"></a><code><span class="keyword">val</span> renaming : <a href="index.html#type-path">path</a> <span>&#45;&gt;</span> <a href="index.html#type-path">path</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>renaming x x'</code> renames the binding at <code>x</code> to <code>x'</code>. Note that such renaming does not affect names <i>under</i> <code>x</code>. See <a href="index.html#val-renaming_subtree"><code>renaming_subtree</code></a> for comparison. It is an error if there was no <code>x</code> from the beginning.</p></dd></dl><dl><dt class="spec value" id="val-renaming_subtree"><a href="#val-renaming_subtree" class="anchor"></a><code><span class="keyword">val</span> renaming_subtree : <a href="index.html#type-path">path</a> <span>&#45;&gt;</span> <a href="index.html#type-path">path</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>renaming_subtree path path'</code> relocates the subtree rooted at <code>path</code> to <code>path'</code>. If you only want to move the root, not the entire subtree, see <a href="index.html#val-renaming"><code>renaming</code></a>. It is an error if the subtree was empty (nothing to move).</p></dd></dl></section><section><header><h3 id="associated-data"><a href="#associated-data" class="anchor"></a>Associated Data</h3></header><dl><dt class="spec value" id="val-filter_map"><a href="#val-filter_map" class="anchor"></a><code><span class="keyword">val</span> filter_map : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>filter_map f</code> applies the function <code>f</code> to the associated data in the tree. If the result is <code>None</code>, the binding would be removed from the tree. Otherwise, if the result is <code>Some x</code>, the content of the binding would be replaced with <code>x</code>.</p></dd></dl></section><section><header><h3 id="sequencing"><a href="#sequencing" class="anchor"></a>Sequencing</h3></header><dl><dt class="spec value" id="val-seq"><a href="#val-seq" class="anchor"></a><code><span class="keyword">val</span> seq : <span><span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>seq [pat0; pat1; pat2; ...; patn]</code> runs the patterns <code>pat0</code>, <code>pat1</code>, <code>pat2</code>, ..., <code>patn</code> in order.</p></dd></dl></section><section><header><h3 id="union"><a href="#union" class="anchor"></a>Union</h3></header><dl><dt class="spec value" id="val-union"><a href="#val-union" class="anchor"></a><code><span class="keyword">val</span> union : <span><span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>union [pat0; pat1; pat2; ...; patn]</code> calculates the union of the results of individual patterns <code>pat0</code>, <code>pat1</code>, <code>pat2</code>, ..., <code>patn</code>.</p></dd></dl></section></section><section><header><h2 id="pretty-printers"><a href="#pretty-printers" class="anchor"></a>Pretty Printers</h2></header><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <span>(Stdlib.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> Stdlib.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Pretty printer for <a href="index.html#type-t"><code>t</code></a>.</p></dd></dl></section></div></body></html>